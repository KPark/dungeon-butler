extends layout

block content
    div(ng-controller="character-create-controller", ng-init="init()" style="width: 100%; height: 100%;")
        table(style="width: 100%; height: 100%;")
            tbody(style="width: 100%; height: 100%;")
                tr
                    td(style="vertical-align: top; width: 15%; padding-right: 1em;")
                        button(ng-click="saveCharacter()") Save
                        button(ng-click="resetCharacter()") Reset
                        button(ng-click="goToCharacterSelect()") Character Select
                        input(ng-model="activeCharacter.name" style="width: 100%")
                        br
                        div {{activeCharacter.race}} {{activeCharacter.class}} Lv. {{activeCharacter.level}}
                        br
                        div HP: {{activeCharacter.hp}}
                        h3 Ability Scores
                        table
                            thead
                                tr
                                    td Ability
                                    td Score
                                    td Modifier
                            tbody
                                tr(ng-repeat="abilityScore in activeCharacter.abilityScores")
                                    td {{abilityScore.name}}
                                    td(ng-bind="getAbilityScore(abilityScore)")
                                    td(ng-bind="getAbilityModifier(abilityScore)")
                        h3 Powers
                        div(style="height: 5em; overflow: auto;")
                            div(ng-repeat="power in activeCharacter.powers") {{power.name}}
                        h3 Feats
                        div(style="height: 5em; overflow: auto;")
                            div(ng-repeat="feat in activeCharacter.feats") {{feat.name}}
                        h3 Skills
                        div(style="height: 6em; overflow: auto;")
                            div(ng-repeat="skill in activeCharacter.skills") {{skill.name}} - {{skill.race + skill.trained}}
                    td(style="background-color: black; color: white; height: 100%; overflow: auto; width: 100%")
                        div(ng-include="currentTab" style="height: 100%;")
            tfoot
                tr
                    td(colspan="2" style="width: 100%;")
                        button(href="javascript: void(0)" ng-click="currentTab = 'cc.races.html'") Race
                        span &nbsp;&nbsp;
                        button(href="javascript: void(0)" ng-click="currentTab = 'cc.classes.html'") Class
        script(type="text/ng-template" id="cc.races.html")
            div(ng-repeat="t in races" style="height: 100%;" class="race_select" ng-hide="currentRace != t.name")
                table(style="width: 100%; height: 100%; vertical-align: top;")
                    tbody
                        tr
                            td(style="vertical-align: top; width: 60%")
                                h2(style="color: white;") Name: {{t.name}}
                                div(ng-repeat="trait in t.traits")
                                    h2 {{trait.name}}
                                    div {{trait.description}}
                            td(rowspan="2" style="text-align: right; padding-right: 1em; vertical-align: top; width: 40%;")
                                table(style="width: 100%;")
                                    tr
                                        td
                                            h2 Average Height
                                        td
                                            {{t.averageHeight}}
                                    tr
                                        td
                                            h2 Average Weight
                                        td
                                            {{t.averageWeight}}
                                    tr
                                        td
                                            h2 Size
                                        td
                                            {{t.size}}
                                    tr
                                        td
                                            h2 Speed
                                        td
                                            {{t.speed}}
                                    tr
                                        td
                                            h2 Vision
                                        td
                                            {{t.vision}}
                                    tr
                                        td
                                            h2 Languages
                                        td
                                            span(ng-repeat="language in t.languages")
                                                {{language.name}}
                                                br
                                    tr
                                        td
                                            h2 Skills
                                        td
                                            span(ng-repeat="skill in t.skillBonus")
                                                {{skill.name}}: {{skill.bonus}}
                                                br
                                    tr
                                        td
                                            h2 Ability Bonuses
                                        td
                                            span(ng-repeat="ability in t.abilityScores")
                                                {{ability.name}}:&nbsp;{{ability.value}}
                                                br
                    tfoot
                        tr
                            td
                                button(href='javascript: void(0)' ng-click="pickRace(t)") Yeah!  This is me!
                            td(style="text-align: right;")
                                button(href="javascript: void(0)" ng-click="getNextRace($index - 1)") Previous
                                button(href="javascript: void(0)" ng-click="getNextRace($index + 1)") Next
        script(type="text/ng-template" id="cc.classes.html")
            div(ng-repeat="t in classes" style="height: 100%;" class="class_select" ng-hide="currentClass != t.name")
                table(style="width: 100%; height: 100%; vertical-align: top;")
                    tbody
                        tr
                            td(style="vertical-align: top; width: 60%")
                                h2(style="color: white;") Name: {{t.name}}
                                div(ng-repeat="build in t.builds")
                                    button(ng-click="pickBuild(build, t)") {{build.name}}
                            td(rowspan="2" style="text-align: right; padding-right: 1em; vertical-align: top; width: 40%;")
                                table(style="width: 100%;")
                                    tr
                                        td
                                            h2 Power Source
                                        td
                                            {{t.powerSource}}
                                    tr
                                        td
                                            h2 Armor Proficiencies
                                        td
                                            span(ng-repeat="armor in t.armorProficiencies")
                                                {{armor.name}}
                                                br
                                    tr
                                        td
                                            h2 Weapon Proficiencies
                                        td
                                            span(ng-repeat="weapon in t.weaponProficiencies")
                                                {{weapon.name}}
                                                br
                                    tr
                                        td
                                            h2 Implements
                                        td
                                            span(ng-repeat="implement in t.implements")
                                                {{implement.name}}
                                                br
                                    tr
                                        td
                                            h2 Skills
                                        td
                                            div(style="height: 5em; overflow: auto;")
                                                span(ng-repeat="skill in t.skills")
                                                    {{skill.name}}
                                                    br
                                    tr
                                        td
                                            h2 Class Powers
                                        td
                                            span(ng-repeat="power in t.powers")
                                                {{power.name}}
                                                br
                                    tr
                                        td
                                            h2 Hit Points
                                        td
                                            {{t.hitPoints.base}} + {{t.hitPoints.score}} Score
                                            br
                                            {{t.hitPoints.level}} Per Level
                                    tr
                                        td
                                            h2 Healing Surges
                                        td
                                            {{t.healingSurge.base}} + {{t.healingSurge.modifier}} Modifier
                    tfoot
                        tr
                            td
                            td(style="text-align: right;")
                                button(href="javascript: void(0)" ng-click="getNextClass($index - 1)") Previous
                                button(href="javascript: void(0)" ng-click="getNextClass($index + 1)") Next
